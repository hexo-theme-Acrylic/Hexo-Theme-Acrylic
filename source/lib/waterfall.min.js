function waterfall(t){function e(t,e){var n=window.getComputedStyle(e);return parseFloat(n["margin"+t])||0}function n(t){return t+"px"}function r(t){return parseFloat(t.style.top)}function o(t){return parseFloat(t.style.left)}function l(t){return t.clientWidth}function i(t){return t.clientHeight}function u(t){return r(t)+i(t)+e("Bottom",t)}function a(t){return o(t)+l(t)+e("Right",t)}function s(t){t=t.sort(function(t,e){return u(t)===u(e)?o(e)-o(t):u(e)-u(t)})}function f(e){l(t)!=w&&(e.target.removeEventListener(e.type,arguments.callee),waterfall(t))}"string"==typeof t&&(t=document.querySelector(t));var p=[].map.call(t.children,function(t){return t.style.position="absolute",t});t.style.position="relative";var c=[];p.length&&(p[0].style.top="0px",p[0].style.left=n(e("Left",p[0])),c.push(p[0]));for(var y=1;y<p.length;y++){var d=p[y-1],v=p[y],h=a(d)+l(v)<=l(t);if(!h)break;v.style.top=d.style.top,v.style.left=n(a(d)+e("Left",v)),c.push(v)}for(;y<p.length;y++){s(c);v=p[y];var g=c.pop();v.style.top=n(u(g)+e("Top",v)),v.style.left=n(o(g)),c.push(v)}s(c);var m=c[0];t.style.height=n(u(m)+e("Bottom",m));var w=l(t);window.addEventListener?window.addEventListener("resize",f):document.body.onresize=f}